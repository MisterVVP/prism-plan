global
    log stdout format raw local0
    maxconn 4096

defaults
    log global
    mode http
    option httplog
    option dontlognull
    timeout connect 5s
    timeout client  30s
    timeout server  30s

resolvers docker
    nameserver dns1 127.0.0.11:53
    resolve_retries 3
    timeout resolve 1s
    timeout retry 1s
    hold other 30s
    hold refused 30s
    hold nx 30s
    hold timeout 30s
    hold valid 10s

frontend prism_api_frontend
    bind *:${PRISM_API_PORT}
    default_backend prism_api_backend

backend prism_api_backend
    balance roundrobin
    server-template prism_api ${PRISM_API_REPLICAS} prism-api:7071 check resolvers docker init-addr none
